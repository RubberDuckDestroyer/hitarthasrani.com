<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Hitarth Asrani]]></title><description><![CDATA[A blog ranting the cloud life.]]></description><link>https://www.hitarthasrani.com</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 14 Jan 2024 21:38:14 GMT</lastBuildDate><item><title><![CDATA[Using ChatOps to streamline operational activites on AWS]]></title><description><![CDATA[Today I’d like to introduce you to ChatOps, the practice of centralising operational activites to chat applications with an interactive…]]></description><link>https://www.hitarthasrani.com/2023-12-01-aws-chatbot/</link><guid isPermaLink="false">https://www.hitarthasrani.com/2023-12-01-aws-chatbot/</guid><pubDate>Fri, 01 Dec 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Today I’d like to introduce you to &lt;em&gt;ChatOps&lt;/em&gt;, the practice of centralising operational activites to chat applications with an interactive ChatBot. In this use case, the Chatbot allows you to get information from your AWS Account and query for information from your aws account.&lt;/p&gt;
&lt;p&gt;Traditionally, setting this up includes setting up integrations with Slack or Teams and setting up your own chatbot that will respond to commands or alert you about anything you program it to do. This process can be lengthy, technically challenging or costly. Luckily for us, AWS has a solution that makes this super quick (just make sure you have admin access for your chat client or know someone with the right permissions).&lt;/p&gt;
&lt;p&gt;AWS ChatBot allows us to quickly set up an integration with AWS Chime, Slack or Teams and get a chatbot up and running in no time. Some of the useful things AWS ChatBot can do for you:&lt;/p&gt;
&lt;h2&gt;Notify&lt;/h2&gt;
&lt;p&gt;AWS Chatbot can notify you about events happening on your AWS account.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Alert you on findings from SecurityHub, CloudWatch Alarms and anything via SNS.&lt;/li&gt;
&lt;li&gt;Alert you on Budget alerts&lt;/li&gt;
&lt;li&gt;Alert you on events from Cloudformation Stacks or AWS Dev tools from CodeBuild, CodePipeline and CodeDeploy.&lt;/li&gt;
&lt;li&gt;Other services include AWS Config, Amazon GuardDuty, Amazon EventBridge, the AWS Health dashboard.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Command&lt;/h2&gt;
&lt;p&gt;This allows you to command AWS ChatBot for information or allow ChatBot to trigger AWS Services&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Invoke a lambda function to start a workflow&lt;/li&gt;
&lt;li&gt;Get diagnostic information from certain AWS Services like EC2, CloudWatch alerts&lt;/li&gt;
&lt;li&gt;Run ReadOnly or mutative commands supported by AWS CLI in your Chat Application&lt;/li&gt;
&lt;li&gt;Restart EC2 instances and use AWS Systems Manager to resolve incidents&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Customise&lt;/h2&gt;
&lt;p&gt;You can customise command aliases which look something like:
&lt;code class=&quot;language-text&quot;&gt;@aws alias create alias_name mapped_action&lt;/code&gt; - to create an alias for a mapped action;
&lt;code class=&quot;language-text&quot;&gt;@aws alias list&lt;/code&gt; - to list out aliases created;
&lt;code class=&quot;language-text&quot;&gt;@aws run alias_name&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;@aws alias run alias_name&lt;/code&gt; - to run a specific alias&lt;/p&gt;
&lt;p&gt;You can also customise notifications sent by AWS Chatbot using a JSON syntax. Here’s an example&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
&quot;version&quot;: &quot;1.0&quot;,
&quot;source&quot;: &quot;custom&quot;,
&quot;id&quot;: &quot;c-weihfjdsf&quot;,
&quot;content&quot;: {
    &quot;textType&quot;: &quot;client-markdown&quot;,
    &quot;title&quot;: &quot;:warning: Banana Order processing is down!&quot;,
    &quot;description&quot;: &quot;Banana Order processor application is no longer processing orders. OnCall team has beeen paged.&quot;,
    &quot;nextSteps&quot;: [
    &quot;Refer to &amp;lt;http://www.example.com|*diagnosis* runbook&gt;&quot;,
    &quot;@googlie: Page Jane if error persists over 30 minutes&quot;,
    &quot;Check if instance i-04d231f25c18592ea needs to receive an AMI rehydration&quot;
    ],
    &quot;keywords&quot;: [
    &quot;BananaOrderIntake&quot;,
    &quot;Critical&quot;,
    &quot;SRE&quot;
    ]
},
&quot;metadata&quot;: {
    &quot;threadId&quot;: &quot;OrderProcessing-1&quot;,
    &quot;summary&quot;: &quot;Order Processing Update&quot;,
    &quot;eventType&quot;: &quot;BananaOrderAppEvent&quot;,
    &quot;relatedResources&quot;: [
    &quot;i-04d231f25c18592ea&quot;,
    &quot;i-0c8c31affab6078fb&quot;
    ],
    &quot;additionalContext&quot;: {
    &quot;priority&quot;: &quot;critical&quot;
    }
}
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Please note that the &lt;code class=&quot;language-text&quot;&gt;metadata&lt;/code&gt; section will be supported in a future release.&lt;/p&gt;
&lt;h2&gt;Caveats, Security and other stuff people dont think about&lt;/h2&gt;
&lt;p&gt;Like with any service, there’s some caveats when you use this AWS service. Please keep this in mind when using a service to make sure it works with your use case. Alternatively, design around these caveats when building your chatbot.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unsupported services&lt;/strong&gt; - The following services are unsupported commands that are not available to use with AWS ChatBot.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&quot;appsync:ListApiKeys&quot;,
&quot;chatbot:*&quot;,
&quot;codecommit:GetFile&quot;,
&quot;codecommit:GetCommit&quot;,
&quot;codecommit:GetDifferences&quot;,
&quot;cognito-idp:*&quot;,
&quot;cognito-identity:*&quot;,
&quot;connect:GetFederationToken&quot;,
&quot;dynamodb:BatchGetItem&quot;,
&quot;dynamodb:GetItem&quot;,
&quot;ec2:GetPasswordData&quot;,
&quot;ecr:GetAuthorizationToken&quot;,
&quot;ecr:GetLogin&quot;,
&quot;gamelift:RequestUploadCredentials&quot;,
&quot;gamelift:GetInstanceAccess&quot;,
&quot;identitystore:*&quot;,
&quot;lightsail:DownloadDefaultKeyPair&quot;,
&quot;lightsail:GetInstanceAccessDetail&quot;,
&quot;lightsail:GetKeyPair&quot;,
&quot;lightsail:GetKeyPairs&quot;,
&quot;lightsail:UpdateRelationalDatabase&quot;,
&quot;iam:*&quot;,
&quot;kms:*&quot;,
&quot;redshift:GetClusterCredentials&quot;,
&quot;sdb:*&quot;,
&quot;secretsmanager:*&quot;,
&quot;sso:*&quot;,
&quot;sso-admin:*&quot;,
&quot;sso-oidc:*&quot;,
&quot;storagegateway:DescribeChapCredentials&quot;,
&quot;sts:*&quot;,
&quot;s3:GetObject&quot;,
&quot;s3:HeadObject&quot;,
&quot;s3:PutObject&quot;,
&quot;s3:GetBucketPolicy&quot;,
&quot;snowball:GetJobUnlockCode&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Teams/Slack/Chime integration&lt;/strong&gt; - This is a quick solution to integrate &lt;em&gt;provided you have the right permissions on AWS and your Chat Application&lt;/em&gt;. If you ar eplannig to set this up for a teams channel in a large organization, please have someone from your Internal IT team or your Teams/Slack channel admin help you out with accepting and setting up AWS Chatbot on the chat client.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Security and Permissions&lt;/strong&gt; - Now, the ability to read and modify your cloud resources from your teams channel is something that can be very powerful but also very damaging in the wrong hands. AWS Provides some predefined permission templates such as “ReadOnly” permissions. AWS also allows you to have GuardRails for users so that they cannot run certain commands. Additionally Audit logs are enabled by default, and log the commands, workspace ID, Channel ID, and the Channel user ID. Lastly, CloudWatch can log all errors or all commands that are run by aws chatbot.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pricing&lt;/strong&gt; - You pay only for any underlying services used such as SNS, CloudWatch, GuardDuty or SecurityHub.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Others&lt;/strong&gt; -&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If you have thousands of alerts in a specific region you must make sure you have the correct Disaster Recovery process and channel design to combat the thousands of alerts you may get if a region goes down.&lt;/li&gt;
&lt;li&gt;Check the SLA’s with AWS as I could not find anything on this and AWS Chatbot in the end is an AWS Managed service. With any integation, all parts must work together to provide a coherent solution.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Amazon Linux 2023 just dropped]]></title><description><![CDATA[If you’re running workloads on the cloud, chances are you’re machines are running linux. RedHat, Fedora, Ubuntu, etc. There’s many flavours…]]></description><link>https://www.hitarthasrani.com/2023-03-21-amazon-linux-3/</link><guid isPermaLink="false">https://www.hitarthasrani.com/2023-03-21-amazon-linux-3/</guid><pubDate>Tue, 21 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;If you’re running workloads on the cloud, chances are you’re machines are running linux. RedHat, Fedora, Ubuntu, etc. There’s many flavours to choose from, but then again if you’re on AWS you’re probably familiar with Amazon Linux (AL). As part of their release schedule, AWS releases a new major version every 2 years and Amazon Linux 2023 (AL2023) just dropped in General availability on the 15th of March 2023.&lt;/p&gt;
&lt;p&gt;Amazon Linux is AWS’s rpm based linux distro for general purpose workloads and integrates with AWS services. It is designed for scale and LTS. From AL2023 onwards, AWS will release a new version of Amazon Linux every 2 years.&lt;/p&gt;
&lt;h2&gt;The Benefits&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Long Term Support&lt;/li&gt;
&lt;li&gt;Predictable Release Cycle - plan your upgrades and migrations&lt;/li&gt;
&lt;li&gt;Versioned repositories for AL2023 = more consistent OS updates.&lt;/li&gt;
&lt;li&gt;Security Upgrades and Compliance - SELinux is enabled by default on permissive mode (permission denials are logged but not enforced). You can also set security policies at boot time.&lt;/li&gt;
&lt;li&gt;OS Level Optimisations.&lt;/li&gt;
&lt;li&gt;Kernal Hardening and Live Patching.&lt;/li&gt;
&lt;li&gt;Use AL2023 at no additional cost as part of your EC2 package (Please check EC2 pricing).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;What should engineers know about AL2023?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Standard support - 2023 &amp;#x26; 2024.&lt;/li&gt;
&lt;li&gt;Maintenance - 2025 - 2027.&lt;/li&gt;
&lt;li&gt;Package manager: dnf.&lt;/li&gt;
&lt;li&gt;Uses the XFS Filesystem on the root filesystem.&lt;/li&gt;
&lt;li&gt;Networking interfaces are managed by the &lt;code class=&quot;language-text&quot;&gt;systemd-networkd&lt;/code&gt; system service. Amazon Linux 2 used &lt;code class=&quot;language-text&quot;&gt;dhclient&lt;/code&gt; previously.&lt;/li&gt;
&lt;li&gt;OpenSSL 3 - The Open Secure Socket Layer v3 (OpenSSL) cryptography toolkit is available. It uses the SSL v2/vv3 and TLS v1 network protocols and the required cryptography standards.&lt;/li&gt;
&lt;li&gt;IMDSv2 - Any instances launched with AL2023 will require the use of IMDS v2 and the default hop limit will be set to 2 to help with containerised workloads. This can be manually overridden if needed.&lt;/li&gt;
&lt;li&gt;Check support info on a specific package: &lt;code class=&quot;language-text&quot;&gt;sudo dnf supportinfo --packagename&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Check support info on all installed packages: &lt;code class=&quot;language-text&quot;&gt;sudo dnf supportinfo --show installed&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Customise cloud-init to configure them dynamically: Create your cloud-init action files in &lt;code class=&quot;language-text&quot;&gt;/etc/cloud/cloud.cfg.d&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Networking configurations generated in: &lt;code class=&quot;language-text&quot;&gt;/run/systemd/network&lt;/code&gt;. You can add custom config files to &lt;code class=&quot;language-text&quot;&gt;/run/systemd/network&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;/etc/systemd/network&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Python 3.9 (System Python) has security support until March 2028&lt;/li&gt;
&lt;li&gt;AL2023 is based on Fedora, but not any single release - there are components from more than one release of Fedora -  some of which are modified.  Other components more closely resemble the components in CentOS Stream 9 or were developed independently.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AWS Integration is still a work in progress for some services (CodeDeploy,Inspector as of writing this), check the GitHub pages for known issues&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There’s a lot to take in for this new OS which will most likely be the default OS you use for general purpose workloads on AWS. As with anything else in technology, there will always be bugs. Check the known issues, plan and prepare yourself before committing to any different tech, especially when it comes to Operating Systems.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Discussion forum: &lt;a href=&quot;https://forums.aws.amazon.com/forum.jspa?forumID=228&quot;&gt;https://forums.aws.amazon.com/forum.jspa?forumID=228&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Github Issues Page: &lt;a href=&quot;https://github.com/amazonlinux/amazon-linux-2023/issues&quot;&gt;https://github.com/amazonlinux/amazon-linux-2023/issues&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Known Issues: &lt;a href=&quot;https://docs.aws.amazon.com/linux/al2023/release-notes/relnotes-20230315.html&quot;&gt;https://docs.aws.amazon.com/linux/al2023/release-notes/relnotes-20230315.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Roadmap: &lt;a href=&quot;https://github.com/amazonlinux/amazon-linux-2023/projects/1&quot;&gt;https://github.com/amazonlinux/amazon-linux-2023/projects/1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Amazon Linux 2023 home page: &lt;a href=&quot;https://aws.amazon.com/linux/amazon-linux-2023/&quot;&gt;https://aws.amazon.com/linux/amazon-linux-2023/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;AL2023 packages: &lt;a href=&quot;https://docs.aws.amazon.com/linux/al2023/release-notes/all-packages.html&quot;&gt;https://docs.aws.amazon.com/linux/al2023/release-notes/all-packages.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Using the New AWS Auckland Location in AWS Direct Connect]]></title><description><![CDATA[On the 10th of March, AWS announced a new AWS Direct Connect location in Auckland. This is part of the new AWS Region planned for Auckland…]]></description><link>https://www.hitarthasrani.com/2023-03-13-aws-direct-connect-auckland/</link><guid isPermaLink="false">https://www.hitarthasrani.com/2023-03-13-aws-direct-connect-auckland/</guid><pubDate>Mon, 13 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;On the 10th of March, AWS announced a new AWS Direct Connect location in Auckland. This is part of the new AWS Region planned for Auckland.&lt;/p&gt;
&lt;h2&gt;AWS Direct Connect?&lt;/h2&gt;
&lt;p&gt;AWS Direct Connect is AWS’s service to create a dedicated network connection to AWS. Any company that wants to connect their exisitng on-premises solutions or network to AWS should have a way to connect their resoruces to AWS, especially if they do not want to use the public internet for this.&lt;/p&gt;
&lt;p&gt;The benefits this brings are mainly around security, reliability (with regards to latency), scalability (w.r.t. data transfers and real time data analysis)&lt;/p&gt;
&lt;p&gt;Setting up Hybrid connectivity can be an integral part of any enterprise’s cloud journey. I can think of the following scenarios where this new Direct Connect location can be helpful:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Any kiwi business looking at migrating to AWS; and specifically wanting to utilise the upcoming Auckland Region instead of the existing Sydney (ap-southeast-2) region.&lt;/li&gt;
&lt;li&gt;Any kiwi business that already uses AWS and has set up Direct Connect using one of the Sydney locations and wants to set up their network for High Resiliency, utilising multiple locations.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;What you should know about AWS Direct Connect&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Direct connect offers two types of connections -&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Hosted Connection: A connection provisioned by an AWS Direct Connect Partner on behalf of a customer. (Bandwidth options - 50 Mbps, 100 Mbps, 200 Mbps, 300 Mbps, 400 Mbps, 500 Mbps, 1 Gbps, 2 Gbps, 5 Gbps, and 10 Gbps.)&lt;/li&gt;
&lt;li&gt;Dedicated Connection: A connection associated with once customer (Bandwidth options: 1Gbps, 10Gbps and 100 Gbps)&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Direct Connect uses BGP (Border Gateway Protocol) to connect to your on-prem location. You will need to configure this when you set up a virtual interface or VIF for your connection.&lt;/li&gt;
&lt;li&gt;To encrypt your traffic, you can use MAC Security or MACsec which is available on dedicated connections.&lt;/li&gt;
&lt;li&gt;Direct Connect works with Direct Connect Gateways and Transit VIFs to connect to your AWS Transit Gateway and VPCs in the same region to your on premises network.&lt;/li&gt;
&lt;li&gt;Also look at Private VIFs, Public VIFs and LAGs (Link Aggregation Groups)&lt;/li&gt;
&lt;li&gt;The Auckland location offers dedicated 1 Gbps and 10 Gbps connections, with MACsec encryption available for 10 Gbps.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Using the Auckland Location&lt;/h2&gt;
&lt;p&gt;If you use a Hub and Spoke networking model, create your AWS Direct Connect connection in your “Hub” or “Shared Services” account. Ideally, this will also be the account where your Transit Gateway lives.&lt;/p&gt;
&lt;p&gt;In the AWS Console, search for &lt;code class=&quot;language-text&quot;&gt;Direct Connect&lt;/code&gt; then click on &lt;code class=&quot;language-text&quot;&gt;Create a Connection&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Once here, you can enter a connection name, your location (&lt;strong&gt;IMPORTANT This needs to be set to &lt;code class=&quot;language-text&quot;&gt;Datacom DH6, Auckland&lt;/code&gt;&lt;/strong&gt;), your connection speed and your on prem service provider. Refer to the picture below for an example.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/91589775e52f83948608de10f70f0b90/65d79/direct-connect-connection.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 102.02702702702702%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaUlEQVQ4y32U63KbMBCF8/6P1h9t4/E0SSc24MQYDIiLEBLicrorcExsU2Y+JBAcrc6u9OT5AX49b/Dy+ortdovnzQZ730eaZTgnqSNJqZ1JHNncz9xzXhSopERZVXg6fHyS2F+8vXv48x4QPrzggJ3nk3CAvRdM7aLP4978jr87RTFkXU+CrM7RZHmBJK8QixK1Umh0g6a5ohbtbZ+/ZzEnyDefZ/U8HAKacbfD6RSh6zpYax1dZ9ETnV3na8msngkBQSTklzYGfI3jiGEYHG03QBN2BOwAtP04Mcz0w1XQtK0L2Z994STwAL/j6Egaseqw8SLswhRhqRHLFhFxqowjNwvBRmv6sSOBpR9y9tGg5eUYi7TWiHKJc6lcP5UTCVHq9irIN5eUTLi2LEsYWramiXiyS1IM9Vt6b4x2/SWaxqtqIfh5PFIiTgjDkxNm3zgpS+yCR2NfEUrqZBSZJS9bxrQuupFEKTP3YIKTNrrnKYHXJZN3Xhjh40zJIM9ypSGIgnwpbyEveUy19kvoTjCTCj93n/jxssfvY4G3VCOsLY7yHn4fFBpZ064LSorQP0aOV+8DkaigqcZq20PdQeWhLTRVxaqgovJIk4SyVLmKZy95Z4zjxcPvLXu7FLoTzGWD/SFESqcGZ8tQUpjJ9FkL37mIPBTkrcalwhE+ui4/3rKelEohCGPEcQxBJ04mcne+MSLP0fX99NPKRPdJoVtERX2kc1HSLmnoXFOE5q1HbaNqGNoJY99NkC2uRleTIlLI5IwqS6FyAVvLhwyNwkBnZF8Vrl0V1BRBXwia2eJ/121ibj29CP4DqiEIV7P7TNgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;direct-connect-create-wizard&quot;
        title=&quot;direct-connect-create-wizard&quot;
        src=&quot;/static/91589775e52f83948608de10f70f0b90/fcda8/direct-connect-connection.png&quot;
        srcset=&quot;/static/91589775e52f83948608de10f70f0b90/12f09/direct-connect-connection.png 148w,
/static/91589775e52f83948608de10f70f0b90/e4a3f/direct-connect-connection.png 295w,
/static/91589775e52f83948608de10f70f0b90/fcda8/direct-connect-connection.png 590w,
/static/91589775e52f83948608de10f70f0b90/efc66/direct-connect-connection.png 885w,
/static/91589775e52f83948608de10f70f0b90/65d79/direct-connect-connection.png 905w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;You can also set additonal settings for MACsec support, existing LAGs and Tagging for this AWS resource.&lt;/p&gt;
&lt;p&gt;Reach out to me, AWS or an AWS partner if you want to understand the costs associated with AWS Direct Connect, whether it is the right solution for you or if you want to set up a Hybrid cloud environment for your enterprise.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Moving 75,000 files in S3]]></title><description><![CDATA[In my opinion, AWS S3 is by far the most popular and widely used services. I dare say it is the most versatile AWS service. There’s so much…]]></description><link>https://www.hitarthasrani.com/2023-03-06-bulk-s3-bucket-transfer/</link><guid isPermaLink="false">https://www.hitarthasrani.com/2023-03-06-bulk-s3-bucket-transfer/</guid><pubDate>Mon, 06 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;In my opinion, AWS S3 is by far the most popular and widely used services. I dare say it is the most versatile AWS service. There’s so much you can do - general object storage, use it for static file hosting/ content delivery, use it as a service for backups, store and query your log data with SQL using Athena or archive all your data using S3 Glacier and S3 Glacier deep archive. Naturally, a lot of companies want to make the most out of cloud storage  and decrease the cost spent on storing IT information on premises. There’s a lot of data in the world, just look at Facebook…errr…Meta (or any other tech company?) and the concerns governments have about data privacy.&lt;/p&gt;
&lt;h2&gt;The Situation?&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;TLDR: my bucket has a lot of files and more files are uploaded every hour. How do I move anything (that was not uploaded today) to another folder in the same bucket&lt;/strong&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/63a626e7ed037c8eb78569654467f2ec/29c1d/s3-tldr.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABb0lEQVQoz62SW0/CQBCF+/9/gm+aoNGoiQ+++R+MIrSACnKnpaX3eznuGSlpjby5yWSW7szZbw6r4bD2+z1OreNZo+ZUvdY8zIsKjptiPPXw2rfQ1bd4H7uIkwJhlCOKCwRhDtdLj6K/hVuCaVoizUoMP3bo3Bm4VPH4NEZvYOPlzcJz15Sw7Pgkpda8hRQs/pi4uHkY4up+gPNrHWcXXXRuDaE1Rg4Wq6BF2NRoEdpOIuNQmKM5u0QEpnNfjZsjzysUyhZzGyNTkzR7j4LVYcPm1SbEch1ivgx+siL5VLQT5SmpZotA5VDy2oykh6tqUAohTV9tImwV4Uj5R6q+8q1n2OKnPnTER37jma5iY0XSw2laHtZiHJVj8mZSkJCZ1KTjb+5J/TXzxR7Pz+Rb/QqEkDfxgx9kIlg/Dxazkf7RgjpYQz+ZgzCT+kT1E4TPTuNNFKuDQsw7RWxasfwBvJTBPc+9P+ppV1kePPzP9Q1GkUzHInn/3gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;what a situation&quot;
        title=&quot;what a situation&quot;
        src=&quot;/static/63a626e7ed037c8eb78569654467f2ec/fcda8/s3-tldr.png&quot;
        srcset=&quot;/static/63a626e7ed037c8eb78569654467f2ec/12f09/s3-tldr.png 148w,
/static/63a626e7ed037c8eb78569654467f2ec/e4a3f/s3-tldr.png 295w,
/static/63a626e7ed037c8eb78569654467f2ec/fcda8/s3-tldr.png 590w,
/static/63a626e7ed037c8eb78569654467f2ec/efc66/s3-tldr.png 885w,
/static/63a626e7ed037c8eb78569654467f2ec/c83ae/s3-tldr.png 1180w,
/static/63a626e7ed037c8eb78569654467f2ec/29c1d/s3-tldr.png 1375w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Let’s say you are utilising S3 buckets to store files…lots of files…not “I am big tech” kind of files, rather medium to large enterprise kind of files. What kind of files you ask? Maybe text files, json files or anything else. Each file is somewhere between a few hundred KBs to a couple of MBs. But you want to know how many files we have? OK, we got around 75,000 files.&lt;/li&gt;
&lt;li&gt;Now you also want to move &lt;em&gt;some&lt;/em&gt; (74,500) files from one folder (ie. ‘folder1’) to a new folder (ie. ‘folder1_old’) based on when they were uploaded. So that you can clean up this folder, keeping only the files uploaded today. This is easy with the S3 console when you have a few files (say less than a 1000) but the option goes away once you cross the 999+ files mark. Check the images below for an example.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/efda9b1da41fe1fcb1ce5103318810f1/78363/s3-objects-lessthan1000.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 14.18918918918919%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlklEQVQI1z1OwQ0CMQy7/YdhEwbgD9IhRC9t2iZpQSapTjwsK5Zje9v3J2prqPVE6yhNHfLXmatzRXFmSuDXA5Xz6RWoGUZgDGwHZeTCaL2vgGDyOx0E9pDeBQcRSil4E4PvN9TrBZJ26JhQNZiNFda8YHun5E8d5oKdLSJ9LVJVzDkXNy8TEVAusM8Xw/Xwx2/oURqDforz50ob0og2AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;&amp;#39;sorting less than 999 files&amp;#39;&quot;
        title=&quot;&amp;#39;sorting less than 999 files&amp;#39;&quot;
        src=&quot;/static/efda9b1da41fe1fcb1ce5103318810f1/fcda8/s3-objects-lessthan1000.png&quot;
        srcset=&quot;/static/efda9b1da41fe1fcb1ce5103318810f1/12f09/s3-objects-lessthan1000.png 148w,
/static/efda9b1da41fe1fcb1ce5103318810f1/e4a3f/s3-objects-lessthan1000.png 295w,
/static/efda9b1da41fe1fcb1ce5103318810f1/fcda8/s3-objects-lessthan1000.png 590w,
/static/efda9b1da41fe1fcb1ce5103318810f1/efc66/s3-objects-lessthan1000.png 885w,
/static/efda9b1da41fe1fcb1ce5103318810f1/c83ae/s3-objects-lessthan1000.png 1180w,
/static/efda9b1da41fe1fcb1ce5103318810f1/78363/s3-objects-lessthan1000.png 1522w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/114b04c02e888e5d2629b123776578e3/087e3/s3-objects-1000.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuUlEQVQY0z2OaxLCIAyEe//7eA3HE/jDx6ilUMoz0DrrgtUf3yzZJBuGu/a4To4suGmH2/SleRe14OUydFoxRdI0vcnGuv5RgbCvfMbwGhV8iCTsmrAQt3shxt0nnrU18M7ST/AxI2aBSIGUgpQZqM3cB/sy6UEc9PEbaK2F1gazXaDVCH86IJyPkLr1gBZWa0VhYOTOYOYZmVd+ZtPMwUZbeDyecM5hXdfeq5KppfeLSFfDTwnfLfAD2X4zalfn4UAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;&amp;#39;sorting more than 999 files&amp;#39;&quot;
        title=&quot;&amp;#39;sorting more than 999 files&amp;#39;&quot;
        src=&quot;/static/114b04c02e888e5d2629b123776578e3/fcda8/s3-objects-1000.png&quot;
        srcset=&quot;/static/114b04c02e888e5d2629b123776578e3/12f09/s3-objects-1000.png 148w,
/static/114b04c02e888e5d2629b123776578e3/e4a3f/s3-objects-1000.png 295w,
/static/114b04c02e888e5d2629b123776578e3/fcda8/s3-objects-1000.png 590w,
/static/114b04c02e888e5d2629b123776578e3/efc66/s3-objects-1000.png 885w,
/static/114b04c02e888e5d2629b123776578e3/c83ae/s3-objects-1000.png 1180w,
/static/114b04c02e888e5d2629b123776578e3/087e3/s3-objects-1000.png 1575w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For convenience sake, you have some prefixes you can use to filter some files, &lt;em&gt;sometimes&lt;/em&gt; but there’s also &lt;em&gt;20 or more different prefixes&lt;/em&gt; because why not. Why? because you, my dear reader, &lt;strong&gt;also&lt;/strong&gt; have to transfer some files to another folder every couple of hours based on the prefixes. These files get processed and moved using s3 events. &lt;em&gt;Note that this automation using s3 events and lambda is also in place but inactive until tomorrow or when you start it&lt;/em&gt;. You decide to do this manually because you didnt know there were 75,000 files.&lt;/li&gt;
&lt;li&gt;We’re going production coz of course we are. AKA Time pressure and clogged thinking.&lt;/li&gt;
&lt;li&gt;The cherry on top: every hour you get 80 - 100 files more.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;A viable solution but there might be a better way&lt;/h2&gt;
&lt;p&gt;Step 0: Check your folders.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Let’s say your files are in the “folder1” folder, create a new folder called “folder1_old” to store all the old files you want to move out from “folder1”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 1: Immidiately transfer any files that need to be processed into the “process_me” folder . (If you take more than an hour you will have to do this again)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Do this manually if needed. VERY HIGHLY DO NOT RECOMMEND THIS APPROACH
OR&lt;/li&gt;
&lt;li&gt;Do an &lt;code class=&quot;language-text&quot;&gt;aws s3 ls --summarize&lt;/code&gt; and save the output as a text file. (The time taken for this depends on the number of objects in that bucket/folder)&lt;/li&gt;
&lt;li&gt;Import the text file into Excel, using only the columns for “Upload Date” and “object name/file name”&lt;/li&gt;
&lt;li&gt;Sort the excel sheet using the date to find out what files were uploaded today.&lt;/li&gt;
&lt;li&gt;Copy the names of all files uploaded today into a text file.&lt;/li&gt;
&lt;li&gt;Use ChatGPT to write a script that copies files from your bucket’s folder1 to test, using above text file as input for filenames. Make some changes/fixes if needed. End result of script is:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;#!/bin/bash

# Set the names of the source and destination buckets
source_bucket=&quot;your-source-bucket-name&quot;
destination_bucket=&quot;your-destination-bucket-name&quot;

# Read in the list of filenames from a file called &quot;filenames.txt&quot;
# The file should have one filename per line

while read filename; do
  # Use the AWS CLI to move the file from the source bucket to the destination bucket
  aws s3 mv &quot;s3://${source_bucket}/${filename}&quot; &quot;s3://${destination_bucket}/${filename}&quot;
done &amp;lt; filenames.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note: this script can be modified later to do other things&lt;/p&gt;
&lt;p&gt;Repeat this step if the clock has past the hour, more files have been sent to this folder.&lt;/p&gt;
&lt;p&gt;Step 2: If this is done before the clock strikes the next hour ^*:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;do a &lt;code class=&quot;language-text&quot;&gt;s3 sync &amp;lt;source&gt; &amp;lt;destination&gt;&lt;/code&gt; to copy all missing files/sync all files from “folder” into the “folder1_old” folder.&lt;/li&gt;
&lt;li&gt;do a &lt;code class=&quot;language-text&quot;&gt;s3 rm bucket/folder --include &quot;*&quot; --exclude &quot;file1.do_not_forget_extension&quot; --exclude &quot;file2.do_not_forget_extension&quot; ..... --exclude &quot;last_file_to_exclude.do_not_forget_extension&quot;&lt;/code&gt; To remove all files that were just copied to folder1_old if all of them were copied successfully.
When using this script to remove the files, there’s some thing to remember: you need to add the file extension in the exclude option and you need to manually or magically(using another script) add all the files to exclude as exclude options into a command that you run.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Step 3: Enable automation to process files from folder1 now.&lt;/p&gt;
&lt;h2&gt;Alternatives?&lt;/h2&gt;
&lt;p&gt;I did not look into using S3 batch operations while solving the above issue, but there is some kind of solution there which allows you to copy files across buckets/folders in a bucket and allows you to filter files with some options. I might discuss this solution in a future blog.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c843c7462b1235dfc0bb2a0bcf616a43/c8e86/s3-batch-operations-filter.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 94.5945945945946%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACOElEQVQ4y61U2Y6bQBDkNzcvXm0Ur5Q4X5vkLT7XwHCDYcxh7EpXG6w9HNmRglSaAeOequpqnL7vUdYdViaDG+Ww1qIsK1SVPcOeUVYV7H5/ea774TfurT3DqeRF3zdougP+x+Xsdjus12t4no/t1tXV82XvukizDN3hgKZtcTwecTqdbsJJyxrzjYfNZoMXKbharbF52YLM93WNum4UtIbX6z+/v9eCrTDI8gJhGCJJUkGCKIrVy1vXVYZlWcJ1PZHooSh2ymZsAs1ng85MBU1zXuWdkeEHDxfLJR4ePmHy+Iinp8+YPj9jNvuOr99m+DKdYjKZ4MfPX+KlpEG7vteudl2n/r6HQyaLxRLzxQKu54FNsrZSD4uiQC4Y/bslVyVTVhhG0lmjzaBsFmKm7ilw1cMgCLUJ9GcvcoimGX06/VsOydBIQUqn6cwcwb1OAA/Qg2rd68TYYUqGSdpJ4/ic7zhkxphQNpmOiONYYxQEgRwYwDcGmQS9l4BfIN72/bj2Gn6HJxjJIEPNyWiFXSGNMSZEKAfNlysEsibyW5rnwqZEmmZ62FXJlEaqjANp98OI8bSmaVXSmLvXE/L3YEsRzi4lUXYURXrPfZKmGiXfBDrbuUzUQfLI5rFpV0ePBofi11Y+CrEUOEg4ySqKE5X6WyQbOSQXGwgSYFYZrbHgG8nsoH7fhm8bPRyDzJUHkNXds8xilMhgByLTlT2bMvqoq+BNdwccr0AZMneaNeJVFtmUC9r78Ad+rrcXONcj1wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;s3 batch operations filter&quot;
        title=&quot;s3 batch operations filter&quot;
        src=&quot;/static/c843c7462b1235dfc0bb2a0bcf616a43/fcda8/s3-batch-operations-filter.png&quot;
        srcset=&quot;/static/c843c7462b1235dfc0bb2a0bcf616a43/12f09/s3-batch-operations-filter.png 148w,
/static/c843c7462b1235dfc0bb2a0bcf616a43/e4a3f/s3-batch-operations-filter.png 295w,
/static/c843c7462b1235dfc0bb2a0bcf616a43/fcda8/s3-batch-operations-filter.png 590w,
/static/c843c7462b1235dfc0bb2a0bcf616a43/c8e86/s3-batch-operations-filter.png 758w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Some other weird script could also be a potential solution? Adios for now.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Process Monitoring on Windows EC2 Instances With Procstat]]></title><description><![CDATA[Earlier this week, my client approached me with an interesting problem. They had two EC2 Windows instances that ran the SAP IDM Solution…]]></description><link>https://www.hitarthasrani.com/2022-11-25-aws-windows-procstat-monitoring/</link><guid isPermaLink="false">https://www.hitarthasrani.com/2022-11-25-aws-windows-procstat-monitoring/</guid><pubDate>Fri, 20 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Earlier this week, my client approached me with an interesting problem. They had two EC2 Windows instances that ran the SAP IDM Solution. One was for the IDM application (Win Server 2022) and one for the SQL database (Win Server 2019 with SQL). Their request: &lt;em&gt;Can we get alerted when the application process or the database process shuts down but the instance will still be running?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;In simpler terms, monitor this process running on my instance and notify me when this process stops.&lt;/p&gt;
&lt;p&gt;The architecture of the overall solution looks something like this:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2ee4f4ec8d08c6717a18f91fa3c7d4ff/b904a/architecture.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.756756756756754%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAC4jAAAuIwF4pT92AAABVUlEQVQY02VRu0oDQRTNj/gRFpYWNoJfYGFjo5WNjWAhiIWiWFgYrUQEI1imCQpLxCcY1yImRDBi2DxcdslmNbs7+5jHcXaCYvTCZYZ77jlz59yMEAJ/g3P+c/+PAkm3id7FAXjkg4c+RBRC0ASCM2TShkddR6GQR7F4Bv3hXpGI58DtlFN5CMYR3NQQFytAyJB8mvi4PQHtd0FJD6HbQEIcKcgHgseH+5iZHMP0xCg2N1aV4PXpIs7XR+C1rxD7As/jSzCn1kCqDaTzM6eF4EkDJ68wyjvwTE3xlKCWzyG7PI+9lTnkjnYVYNQuUdW25csW4iBGaXYLtYUsiGEp3O40YdRfEHtvsOs5hE5J+aMEbdNARb9Do16GY7cVgcoxIio/LJuY9MYlHrp9F0x6LhiFZVlott4R+B44jcCSSNUz30tJid8LGNR+53AM4YKrTP0T8vwCTKK5xypOe/UAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;architecture diagram&quot;
        title=&quot;architecture diagram&quot;
        src=&quot;/static/2ee4f4ec8d08c6717a18f91fa3c7d4ff/fcda8/architecture.png&quot;
        srcset=&quot;/static/2ee4f4ec8d08c6717a18f91fa3c7d4ff/12f09/architecture.png 148w,
/static/2ee4f4ec8d08c6717a18f91fa3c7d4ff/e4a3f/architecture.png 295w,
/static/2ee4f4ec8d08c6717a18f91fa3c7d4ff/fcda8/architecture.png 590w,
/static/2ee4f4ec8d08c6717a18f91fa3c7d4ff/efc66/architecture.png 885w,
/static/2ee4f4ec8d08c6717a18f91fa3c7d4ff/c83ae/architecture.png 1180w,
/static/2ee4f4ec8d08c6717a18f91fa3c7d4ff/b904a/architecture.png 2175w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;It can be broken down into 3 parts:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The EC2 Instance(s). These had already been created earlier&lt;/li&gt;
&lt;li&gt;The CloudWatch Agent&lt;/li&gt;
&lt;li&gt;The SNS Topic&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Right now, I only want to worry about the Cloudwatch Agent as configuring the Ec2 instance and the SNS topic are relatively easy.&lt;/p&gt;
&lt;p&gt;Now, the First thing that comes to my mind when talking about monitoring an EC2 instance is using the Cloudwatch agent, as this is AWS’s OOTB (out of the box) solution for monitoring anything with EC2.&lt;/p&gt;
&lt;p&gt;We can also customise the cloudwatch agent to collect specifc metrics based on what we require using a json template.&lt;/p&gt;
&lt;p&gt;So if I can monitor my app and db processes using the cloudwatch agent, I don’t need to look at&lt;/p&gt;
&lt;p&gt;But then…can we even monitor a process with the cloudwatch agent?&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 493px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/89cfa2d3d60790a9856b4dc638df0c6d/f88d0/can-we-monitor-it.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 165.54054054054052%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIBUlEQVRIx52Wd1RVVxbGb2acZWKJWZaoJEpoBlREREyQoogBEaRIEYRHHqhRUVFExIgkaqw0YyDgKIggjyZWEBXbIGIZLCAIYgNBAemKHfQ3916TzD9Z+SN3rb3OPufs/e1vf+e8dZ4w2i8TDU8Vn7lnYbEkHq+wnxirjEN9dhYjFOkMdkhgddRxaupbSVQd4vT561TXd3Awr4Ds3DOoso9z/1E7FdWtWCzIQtAXAdXcMwiO8uN24TAu71EjIUSHmfOWM1xxgAE2sURsy6HrdSeOTo5s2byRs2dPk65KYdXK5XjOcqW16RHS982iTARd5T6+8tvJzRx/yjLXUZoaw4kwX9IX2TJNGU3/6QmErEmls62JpIQkkpJSyc46wKEj+Rw7fZHUjCM0dXTR9rSbqYsyEL5UZmKzMIXE6BRKs1I4vD6E5AU+hPqHYaBIRtNtN59or2DT+hXU75tKfvQsimOduaHy4WLmcs6nBpO7Zw0rFgai6xCHoOOTxRg/Fas3RLNvZyw53+mxa843+C3agJ1bKFoee+mrvoyvjF0JcJ6IYqoFfjYWLLA1xc/aBF8rE9E3Z7TWdHSddiF4rVZRFD2Toz+5U137gDtXDpGbm0HQxkS22+mxZq4CDbcU1GYkM8A+jU/tUxlop2KQvQo1B5V4aOkMdUpj+MxUDPzElmcEpnAhdg65vywmPHIdeddr2ZCSxyRnXzZ525O5xpFZq7aiDN2Ea3Ak1gG/4hsWwWT/HfiGhOG2LAyzOZF4B4Wg+D4aQdMrneCQeHaHh7E1dAlb1gax0NsBP8dpLPbwxtE3Em2PHRj6/IKeVzzqztvRnxWOhnsimi4xaLv9LLKLQcvlZ0Z670a4XFFPQckDyu7WU9/SRm3bM65V1VBcdovLN+s4W9rAubL69+ONBgpu1JGaUyT6Dzlf3kihaEXlDRSWNXLxZgMCf+Nrb31M95sXf7ondHV309XVTbc4vn37VjbJl9a7Rb+rW5q/H9+86ZKTrly5Kl7u/8j++9y38ijF/C2GOTk5lJeX/znD6upqbt++TU1NDQ8fPkSaS6Nk7969o7GxkZcvX8pzKaauro5Hjx7JcbW1tTQ3N/P69Wvu3r1LQ4OooVTp4sWL3Lp1i9bWVjmooqKCBw8eiG10cePGDdrb27l586YMJsXduXOH+/fvy0QkEKng1atX5Zw/Wpa0KykpoaOjQwYoLi6Wq0rzFy9ecO/ePTlBKiixq6qqkllL4E+fPv1/y7870qIE+OTJE9mk6lKCtP7mzRuZnQT6e+uVlZVy6xJgZ2fnH4cpSFWltiQ2UhtFRUXyhjSX2igtLZU1krSUAKVCEtilS5fkPckkiSRJpHWhqalJriQxae9o59q1azx//lxm2dLSIu+9evWSx48fy3pJjB6Iv/m6utrfDq9OjmtuaZYx/vLalJSUkZ9/iuLL/6WyopLysnIei0z/6hOePWmho71NZNQhHkA7HW0tvHzewutXbbS11lBWVkzl3Ts0tDymvbOVzpfPZWtqa6axWezsmcjsmZj/vI3OVx0Idl4TmTbdDLsZFtjOMGfSlPEo3bRRxaoTt1mNmFhD4jON2H1wMvtPKym+v4iT5T4k5vuwVvUdK3e5YB+gibW/Hm6rTBDGTR6N0QRtJkzUwtB4ODr6Ggwe1IsgL4FjB8wpvGzHuVMChzI+ZFt4D06f7Ele3gfsz+7HrrTxhP17Ho6rbNF3781Yz08QTMzHYmI+CiNjbQzHf4GNnSkaOl9wME1fVMSKqkotLpz5gMOZfcjPHci5E73Ize5B1t5/okr8BzFxmqyMXYx7qAsW89QQTL8axsixw7F3Hs/OKPGR2pnM/h8cxGtiSEvTMOrv96Omsi/Xr+pQ36TkdrU9RQWDOX6wJwdUH5K0419sijRi4Y8ObNtojbDt+/4s9etBRf562g/kcS0wmBQbPTbbfMRGx4/Z6taHbcq+/LKsH3GhQ0iK+pw9MX3Zm9CD1JSPSNzVW3xmNVm2Wpc1Cm2E+M19OZ88gZJ1qzmhmM2Ob0z54bPP+XHQAJINRpI10YSMSZNJNjchycyE6An6REwZRbT9SCLd1NmyQI31wWoEBw1hpXIIgqvvcArWL+SUt4KtZgakzZ7FHit7gkeMoMTVg3v+i6kKWEp1UDD3xHdjsbEZ2V5KSucuId9JScY0N8ItLbEa+QnzrUchzA00JdfXhxwXB0KMdTnq4sY5ew+yLady3t2Vy76+HHdy5oJCQcmC+Zz61pdCpR/nvZUcd/cmy9Gd2Mm2+GhqkaOcK2qosOCIhzOZ061YradOlJUGWU7jOGRlicp6ErEWRqROs6Rgtqdspz1cOTbLmSMujqTZ27LD0oJII0MidfU54uCOcFjU6LCzAxGGBvgP60+oZi8ixwwkxkCHBFMjYs3GET/FnJ1TJ4ntWZJhO4mUqabsNBvP9q/HET5Wl03jNAk2Hcy86cMQtmppsX30SIL79Seg54cs1dUgzHgi/iYTWWgsJnm6st1jJr+6TidJ6Um8pwtRrk5EinIsMTBmtu4Itgdok7qhD/u2iIBzrdXx1+zD/H69mdNTINLHmaNnznI0L5fQtRHi3WvkZEEBoYGB5BcWUn6niuul18jOTkPpv5lRw835Tn0QG4d8zC5t8dq4B5owf/HXzB7zGV5De+H16WCCnexYFbCKoIgjbApPJmHFUrY62RD37TziAkP5KUL8c7AlHSefKBT9ddihO5DjFkPJHPMl/wPqAUhN0bPisAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Can we monitor it?&quot;
        title=&quot;Can we monitor it?&quot;
        src=&quot;/static/89cfa2d3d60790a9856b4dc638df0c6d/f88d0/can-we-monitor-it.png&quot;
        srcset=&quot;/static/89cfa2d3d60790a9856b4dc638df0c6d/12f09/can-we-monitor-it.png 148w,
/static/89cfa2d3d60790a9856b4dc638df0c6d/e4a3f/can-we-monitor-it.png 295w,
/static/89cfa2d3d60790a9856b4dc638df0c6d/f88d0/can-we-monitor-it.png 493w&quot;
        sizes=&quot;(max-width: 493px) 100vw, 493px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Say hello to the procstat plugin! It can collect metrics from your specified process and is available to use in the CloudWatch agent. From the amazon docs (linked below), it is supported on servers running Linux and on servers running Windows Server 2012 or later.&lt;/p&gt;
&lt;p&gt;The docs have an example on how I can configure this so I can just add that part to my agent. Looking at the metrics, there’s a few ways I can tackle this. The most obvious way to check (and verify that this is the right process) was to read the &lt;code class=&quot;language-text&quot;&gt;pid&lt;/code&gt; or process identifier using and compare it with the actual identifier in the server.&lt;/p&gt;
&lt;p&gt;The final cloudwatch agent json file looks something like this. (Example for Database/SQL Server and Agent)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
    &quot;metrics&quot;: {
        &quot;namespace&quot;: &quot;custom_proc_monitor&quot;,
        &quot;aggregation_dimensions&quot;: [
            [
                    &quot;InstanceId&quot;
            ]
        ],
        &quot;append_dimensions&quot;: {
            &quot;InstanceId&quot;: &quot;${aws:InstanceId}&quot;
        },
        &quot;metrics_collected&quot;: {
            &quot;procstat&quot;: [
                {
                    &quot;exe&quot;: &quot;sqlservr&quot;,
                    &quot;measurement&quot;: [
                        &quot;pid&quot;,
                        &quot;memory_vms&quot;,
                        &quot;memory_rss&quot;
                    ]
                },
                {
                    &quot;exe&quot;: &quot;SQLAGENT&quot;,
                    &quot;measurement&quot;: [
                            &quot;pid&quot;,
                            &quot;memory_vms&quot;,
                            &quot;memory_rss&quot;
                    ]
                }
            ]
        }
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Under &lt;code class=&quot;language-text&quot;&gt;metrics_collected &gt; procstat&lt;/code&gt; you can see the exe name for the SQL Process and the measurements collected. Procstat is also collecting metrics for another process for the SQL Agent. This just means I can send a notification when either the SQL Server process or the SQL agent fails on that server.&lt;/p&gt;
&lt;p&gt;Once the instance has the updated cloudwatch agent, it should start sending in some data for the processes.&lt;/p&gt;
&lt;h2&gt;Gotchas!&lt;/h2&gt;
&lt;p&gt;Like always, things may not go smoothly in the first try. Using the agent and testing it was easy enough but I did have a few things that didn’t go as expected.&lt;/p&gt;
&lt;p&gt;Obviously, windows does not want to use the same “exe name” for the process. I first took the process name from Task manager &gt; Additional processes.&lt;/p&gt;
&lt;p&gt;This exe name did not seem to always work for me, especially for my application server running SAP IDM. I ended up finding the process name by running the &lt;code class=&quot;language-text&quot;&gt;get-process&lt;/code&gt; command on powershell and comparing the PID with the process/exe name on task manager. In the cloudwatch agent, using the process name given this command seems to do the trick. I can also use the pid info displayed by the command to check if Cloudwatch is getting the right information from procstat.&lt;/p&gt;
&lt;h2&gt;Additional Reading&lt;/h2&gt;
&lt;p&gt;(AWS Docs) Collect process metrics with the procstat plugin. &lt;a href=&quot;https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-procstat-process-metrics.html&quot;&gt;https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-procstat-process-metrics.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;GitHub Code for an exmaple in terraform &lt;a href=&quot;https://github.com/RubberDuckDestroyer/windows-process-monitoring-aws-terraform&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[VIDEO] Using AWS Migration Hub]]></title><description><![CDATA[YouTube Link: https://youtu.be/GM2kLYc8-Bw]]></description><link>https://www.hitarthasrani.com/2022-06-06-aws-twitch-stream/</link><guid isPermaLink="false">https://www.hitarthasrani.com/2022-06-06-aws-twitch-stream/</guid><pubDate>Mon, 06 Jun 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;YouTube Link: &lt;a href=&quot;https://youtu.be/GM2kLYc8-Bw&quot;&gt;https://youtu.be/GM2kLYc8-Bw&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using AWS IAM Policy Simulator to debug IAM Policy Issues]]></title><description><![CDATA[In this blog, we’ll discuss debugging AWS IAM Policies and KMS Policies using a tool I didn’t notice earlier. The other day I was having…]]></description><link>https://www.hitarthasrani.com/2022-03-23-aws-iam-policy-simulator/</link><guid isPermaLink="false">https://www.hitarthasrani.com/2022-03-23-aws-iam-policy-simulator/</guid><pubDate>Wed, 23 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;In this blog, we’ll discuss debugging AWS IAM Policies and KMS Policies using a tool I didn’t notice earlier.&lt;/p&gt;
&lt;p&gt;The other day I was having some trouble debugging some issues with AWS Config throwing “Access Denied” errors.
I asked a senior engineer from my team to help me debug this issue. After debugging the issue a bit, we realised that the AWS IAM Role attached to AWS Config was trying to use KMS to encrypt data and did not have access to the key.
My coworker then introduced me to the IAM Policy Simulator which allowed me to debug and recitfy the IAM permissions quickly.&lt;/p&gt;
&lt;p&gt;I have set up a test environment to showcase the IAM Policy Simulator’s capabilities.&lt;/p&gt;
&lt;p&gt;AWS Resources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AWS Config, set up using the one-click option. &lt;em&gt;Note -  In this scenario, we only use this to get the IAM Role. You can create a dummy role to test the IAM Role/Policy.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;A Symmetric KMS key with some permissions that allow some SSO Users to use it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The AWS Config recorder is using the following role:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/66b7f12a21b38ee627f03bab64549b77/d777c/policysim-iam-policy2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOElEQVQoz4VS2W6EMAzM/39c1YdK+4BEK3aBQLiyXOGcZtyCeq1qaeQoPmZiRxljkOc5yrJEmqbQWqMoCuz7DtrhH9kRb9sWTdNA8fAo8cC6roKhdxhHh23bzruj4bIsPjZC2fsdzjlM0/StyVdjvKoqPD9d8BbGktv3PcZh+FWjxqmXA1kPkPnwNHoq+M/YVHVlhrtXSZCZagbPTN913fms8+meaGFeaTC3Vu5YR1CESlIti6jrGr1vxDkwOM+zqOKZd4Rz3nsiW5UwlxfU0Ss4Mi41SRIRoHSa4Hq9Ics/tp17z41z+9w6z9w6C6IoQpZlkmO8Zw7jnC9zZMtdU+Cmcxg7evmLKCOojAQcPp9F9uyzCYulmW/EUVlr5duwToVhiCAI5Nks+AtUQXaCo/kJEsRxLE3fASpbtvOQEMUwAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;test role here&quot;
        title=&quot;test role here&quot;
        src=&quot;/static/66b7f12a21b38ee627f03bab64549b77/fcda8/policysim-iam-policy2.png&quot;
        srcset=&quot;/static/66b7f12a21b38ee627f03bab64549b77/12f09/policysim-iam-policy2.png 148w,
/static/66b7f12a21b38ee627f03bab64549b77/e4a3f/policysim-iam-policy2.png 295w,
/static/66b7f12a21b38ee627f03bab64549b77/fcda8/policysim-iam-policy2.png 590w,
/static/66b7f12a21b38ee627f03bab64549b77/efc66/policysim-iam-policy2.png 885w,
/static/66b7f12a21b38ee627f03bab64549b77/c83ae/policysim-iam-policy2.png 1180w,
/static/66b7f12a21b38ee627f03bab64549b77/d777c/policysim-iam-policy2.png 1555w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This role gives my AWS resource, in this case my AWS Config Recorder, the following AWS Managed permissions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Read-Only access to AWS Services and resources&lt;/li&gt;
&lt;li&gt;A Default Policy for the AWS Config service so that AWS Config can track changes across my acount.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The KMS Key is set up with the following permissions:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Id&quot;: &quot;key-consolepolicy-3&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Sid&quot;: &quot;Allow access for Key Administrators&quot;,
            *REDACTED*
        },
        {
            &quot;Sid&quot;: &quot;Allow Config to use this key&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Principal&quot;: {
                &quot;Service&quot;: &quot;config.amazonaws.com&quot;
            },
            &quot;Action&quot;: &quot;kms:GenerateDataKey*&quot;,
            &quot;Resource&quot;: &quot;*&quot;,
            &quot;Condition&quot;: {
                &quot;ArnLike&quot;: {
                    &quot;aws:SourceArn&quot;: &quot;arn:aws:iam::**********:role/aws-controltower-ConfigRecorderRole&quot;
                }
            }
        }
    ]
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can see that this key already has permissions to allow the above topic to run &lt;code class=&quot;language-text&quot;&gt;KMS:GenerateDataKey*&lt;/code&gt; using the key.&lt;/p&gt;
&lt;p&gt;Jumping back to the &lt;code class=&quot;language-text&quot;&gt;aws-controltower-ConfigReecorderRole&lt;/code&gt; on the AWS IAM Dashboard, you can see a button that says &lt;strong&gt;Simulate&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7de992dfda60d6a28dc68d50fa29ccbd/e405b/policysim-iam-policy.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 20.27027027027027%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtklEQVQY01VPuxKDMAzj/3+vQ5cOPbgrDSFA3jwCauQu7eCTLDuR3GRrkNwM5z1yztj3HTFGrOuKEIL013XhPE+pLy847IwSvWjHcUhx1phpxlspTNOElBK2bZNPuFBKEU5NdGLtg7Uw9xvs8wHvHMZxxDAMstMYY9C2LV59LyKLGg3IiSxVedd1ommtoWuIUf/v+nplw9P08EKrZsS8igs1Ip35gCmZvv8xpQHntqZdlkWQV30AE9cyeaEVrnwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Simualtor Button on IAM Role&quot;
        title=&quot;Simualtor Button on IAM Role&quot;
        src=&quot;/static/7de992dfda60d6a28dc68d50fa29ccbd/fcda8/policysim-iam-policy.png&quot;
        srcset=&quot;/static/7de992dfda60d6a28dc68d50fa29ccbd/12f09/policysim-iam-policy.png 148w,
/static/7de992dfda60d6a28dc68d50fa29ccbd/e4a3f/policysim-iam-policy.png 295w,
/static/7de992dfda60d6a28dc68d50fa29ccbd/fcda8/policysim-iam-policy.png 590w,
/static/7de992dfda60d6a28dc68d50fa29ccbd/efc66/policysim-iam-policy.png 885w,
/static/7de992dfda60d6a28dc68d50fa29ccbd/c83ae/policysim-iam-policy.png 1180w,
/static/7de992dfda60d6a28dc68d50fa29ccbd/e405b/policysim-iam-policy.png 1566w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If you click this, it will take you to the IAM Policy Simulator. Alternatively, you can jump into the Policy Simulator from the IAM Dashboard here.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4d352effd2f7c9ff932c62669c0ae0c1/f470a/policysim-iam-dashboard.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.891891891891895%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQoz3VQy24TQRD0H3KOgsQpEbmAyGdwIxEHEiQev8CVCCk3EuVFbOWwMjHGstee3dn17O48dman6Bkb5wAZqTTdperu6u5lOcdo/BsF55hxiZcfbvHqUz9i//MALz72sXt0jZ1313h+fIO99zd49vYKW28usH14he2DSzw9vMST12f4cj5Fr6kq1HUNZQHnAXQGgjOIggGtJCKQj73uH6ZX5Aw8Y7DWRkKKCuksRbognqB4gdZ1MK2NsBS7zlPcYr7IMOgnWC7ryLmuQ6+umxhg7cUqRQMyLIWA1hramPiHgc45eP/gePRzgtNvF6RxK7+hoaDCsig2QkXFnPLgIAgC/jYKTUNu1kOSZISTr99x2x9iOmWrlfMsB2Ns07DRFsrYOFXq4KpDLnRcSWoaQrpa6rjPkuqSH3cYDhLMx1P4ztEN6UZlWW7WkFIiI2HbmjXj//s768DTOcqqgXctvFHwslk1LMoirhDEilwMZwITVpEzumfdIq9MRBYgDBiBU1ymM4zv7zH5NSK3C3it8AcIglp1C5Iz4gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;IAM Dashboard&quot;
        title=&quot;IAM Dashboard&quot;
        src=&quot;/static/4d352effd2f7c9ff932c62669c0ae0c1/fcda8/policysim-iam-dashboard.png&quot;
        srcset=&quot;/static/4d352effd2f7c9ff932c62669c0ae0c1/12f09/policysim-iam-dashboard.png 148w,
/static/4d352effd2f7c9ff932c62669c0ae0c1/e4a3f/policysim-iam-dashboard.png 295w,
/static/4d352effd2f7c9ff932c62669c0ae0c1/fcda8/policysim-iam-dashboard.png 590w,
/static/4d352effd2f7c9ff932c62669c0ae0c1/efc66/policysim-iam-dashboard.png 885w,
/static/4d352effd2f7c9ff932c62669c0ae0c1/c83ae/policysim-iam-dashboard.png 1180w,
/static/4d352effd2f7c9ff932c62669c0ae0c1/f470a/policysim-iam-dashboard.png 1443w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Once you are on the Policy Simulator Page, you can select&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The IAM User, Group or Role to use.&lt;/li&gt;
&lt;li&gt;The Service you need permission to.&lt;/li&gt;
&lt;li&gt;Specific Service actions you would like to use.&lt;/li&gt;
&lt;li&gt;Action settings -  you can provide resource ARN’s here.&lt;/li&gt;
&lt;li&gt;Run the Simulation&lt;/li&gt;
&lt;li&gt;View the Simulation results.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7adf31c59a21a08709be1442b5599eb9/d8c86/policysim-denied.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 29.054054054054056%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCklEQVQY032Qu04DMRBF9+dBFKHLJ1BQEBGgRAJFfAASSDSU7CbZlzf2vh07B9soCMJjpNFobM/xvRPlWcYyEzw8v3H3mPD0mrFerYiXFX0/kBcNm02FlAprbcjdbkfbtpRCYLaatdTcvgwoDVEcx6TrFXWtGIcBqRqSZEma5SilHEy63FBVVejruqZpGvdZH+picc/scs7Z+Zz51TWR1iM+xq0NtRA9cZIinaqyLCmKIgxLKRFOkQfmeU7btYhUMLu4YTI55eT4iOl0SuQfdF0XrBhj0No4S4Teh7f3V5itu/dixtGtoHOcnsjb8cA9xFrzY9BDf8uPsN/efQL3C/cq/4N8hR2e+dl3KXXKjOyG9kUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;IAM Policy Simulator&quot;
        title=&quot;IAM Policy Simulator&quot;
        src=&quot;/static/7adf31c59a21a08709be1442b5599eb9/fcda8/policysim-denied.png&quot;
        srcset=&quot;/static/7adf31c59a21a08709be1442b5599eb9/12f09/policysim-denied.png 148w,
/static/7adf31c59a21a08709be1442b5599eb9/e4a3f/policysim-denied.png 295w,
/static/7adf31c59a21a08709be1442b5599eb9/fcda8/policysim-denied.png 590w,
/static/7adf31c59a21a08709be1442b5599eb9/efc66/policysim-denied.png 885w,
/static/7adf31c59a21a08709be1442b5599eb9/c83ae/policysim-denied.png 1180w,
/static/7adf31c59a21a08709be1442b5599eb9/d8c86/policysim-denied.png 1663w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;A simulaton has already been run in the above screenshot. You can see the &lt;code class=&quot;language-text&quot;&gt;Access Denied&lt;/code&gt; result with some additional information.&lt;/p&gt;
&lt;p&gt;Now I have enough information to create a custom IAM Policy I can attach to this role. I can also quickly test the custom policy on the role using the simulator.&lt;/p&gt;
&lt;p&gt;Here’s a result once the right policy has been attached.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fc40b6c00a0bc0cb049d29cbecb2ef6c/07a9c/policysim-success.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 28.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCUlEQVQY05WPwU7DMBBE8///wg9w4sQJqUJI0BZaqbR146SJ7cZOmjjJw7YoB04w0mhs7+54NjuXBat9xf3iwOO6ZrkrEcc9pzynaRr6vudyuaCUoq5rvPfM8/x9V2it2Bxr7p4KHt4qsvf3NeKwx18tTB7rWoQQ5MGwqiqcc8lQa51MrLWJ0Tzq1VmcddTaoZuOTFYabQxKG0wTml2XzOJApJQSE+qRt/eosixRuy3y9ZkmqPvc0u8+yLqQIGGeYBzxw5DWbNuWIZy7rksa1xxD/aYRYxsCnAVtKXFFjjeKTL0sMOGXfrvCb5b4QvAXROPfCJHITrkkF0d8SDX5ISTsfwb+y2ka+QJdh8zEkv76FAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Policy Simulator Passed&quot;
        title=&quot;Policy Simulator Passed&quot;
        src=&quot;/static/fc40b6c00a0bc0cb049d29cbecb2ef6c/fcda8/policysim-success.png&quot;
        srcset=&quot;/static/fc40b6c00a0bc0cb049d29cbecb2ef6c/12f09/policysim-success.png 148w,
/static/fc40b6c00a0bc0cb049d29cbecb2ef6c/e4a3f/policysim-success.png 295w,
/static/fc40b6c00a0bc0cb049d29cbecb2ef6c/fcda8/policysim-success.png 590w,
/static/fc40b6c00a0bc0cb049d29cbecb2ef6c/efc66/policysim-success.png 885w,
/static/fc40b6c00a0bc0cb049d29cbecb2ef6c/c83ae/policysim-success.png 1180w,
/static/fc40b6c00a0bc0cb049d29cbecb2ef6c/07a9c/policysim-success.png 1440w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;IAM Policy Simulator allows you to quickly debug and test IAM Policies attached to IAM Users, Groups or Roles against specific AWS resources. It saves time spent in manual testing by making this action one-click with instant results and is highly customizable.&lt;/p&gt;
&lt;p&gt;Big thanks to Martin Caarels, you can check out his blog &lt;a href=&quot;https://blog.caarels.com&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</content:encoded></item></channel></rss>